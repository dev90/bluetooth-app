(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(20)},17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),a=n(5),r=n.n(a),i=(n(17),n(2)),s=n.n(i),l=n(3),u=n(6),d=n(7),v=n(9),g=n(8),h=n(1),m=n(10),f=(n(19),void 0),p=void 0,b=void 0,k=void 0,E=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={deviceName:void 0,connected:!1,token:void 0,error:"",processing:!1},n.OnFindToken=n.OnFindToken.bind(Object(h.a)(n)),n.onDiscover=n.onDiscover.bind(Object(h.a)(n)),n.OnDisconnect=n.OnDisconnect.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"OnDisconnect",value:function(){var e=Object(l.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:b.gatt.disconnect();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"OnFindToken",value:function(){var e=Object(l.a)(s.a.mark(function e(){var t,n,o,c=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("----------------- starting ------------------"),this.setState({error:"",processing:!0}),b){e.next=10;break}return console.log("discovering device..."),e.next=7,navigator.bluetooth.requestDevice({filters:[{name:"E_TOKEN_15"}],optionalServices:[65520]});case 7:(b=e.sent)&&console.log("found device with name: "+b.name),b.addEventListener("gattserverdisconnected",function(e){var t=e.target;c.setState({connected:!1}),console.log("Device "+t.name+" is disconnected."),f=void 0,p=void 0,k=void 0,b=void 0});case 10:if(b.gatt.connected){e.next=15;break}return console.log("connecting to device ..."),e.next=14,b.gatt.connect();case 14:k=e.sent;case 15:if(b.gatt.connected?console.log("Connection Status: Connected"):console.log("Connection Status: Not-Connected"),this.setState({connected:b.gatt.connected}),f){e.next=27;break}if(console.log("getting service ..."),b.gatt.connected){e.next=24;break}return console.log("connecting to device ..."),e.next=23,b.gatt.connect();case 23:k=e.sent;case 24:return e.next=26,k.getPrimaryService(65520);case 26:f=e.sent;case 27:if(p){e.next=32;break}return console.log("getting service Characteristic ..."),e.next=31,f.getCharacteristic(65521);case 31:p=e.sent;case 32:return console.log("reading Characteristic value ..."),e.next=35,p.readValue();case 35:t=e.sent,console.log(t),n=new TextDecoder("utf-8"),o=n.decode(t.buffer),console.log("decoded token value"),console.log(o),this.setState({token:o,processing:!1}),console.log("----------------- end ------------------"),e.next=49;break;case 45:e.prev=45,e.t0=e.catch(0),this.setState({error:"Error: "+e.t0,processing:!1}),console.log("some error: "+e.t0);case 49:case"end":return e.stop()}},e,this,[[0,45]])}));return function(){return e.apply(this,arguments)}}()},{key:"onDiscover",value:function(){console.log("Requesting any Bluetooth Device..."),navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["0000fff0-0000-1000-8000-00805f9b34fb"]}).then(function(e){return console.log("Connecting to GATT Server..."),e.gatt.connect()}).then(function(e){return console.log("Getting Services..."),e.getPrimaryServices()}).then(function(e){console.log("Getting Characteristics...");var t=Promise.resolve();return e.forEach(function(e){t=t.then(function(t){return e.getCharacteristics().then(function(t){console.log("> Service: "+e.uuid),t.forEach(function(e){console.log(">> Characteristic: "+e.uuid+" "+function(e){var t=[];for(var n in e.properties)!0===e.properties[n]&&t.push(n.toUpperCase());return"["+t.join(", ")+"]"}(e))})})})}),t}).catch(function(e){console.log("Error! "+e)})}},{key:"render",value:function(){var e=this.state.connected?"Connected":"Not Connected";return c.a.createElement("div",{className:"App"},c.a.createElement("div",null,c.a.createElement("h1",null,"BlueTooth Device")),c.a.createElement("div",null,c.a.createElement("input",{className:"button-css",style:{margin:10},type:"button",value:"Get Token",onClick:this.OnFindToken})),c.a.createElement("div",null,c.a.createElement("div",{className:"status-div"},c.a.createElement("b",null,"Device Status:"),c.a.createElement("span",{style:{margin:10},className:w(this.state.connected)},e),c.a.createElement("input",{className:O("",this.state.connected),style:{margin:10},type:"button",value:"Disconnect",onClick:this.OnDisconnect})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:O("loader",this.state.processing)}),c.a.createElement("h2",{className:O("",!this.state.processing)},c.a.createElement("span",{style:{margin:10}},"  ",this.state.token?this.state.token:""))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"error"},this.state.error)))}}]),t}(c.a.Component);var w=function(e){return e?"connected":"not-connected"},O=function(e,t){return t?e+" show":e+" hide"},x=E;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.0972653c.chunk.js.map